  <a target="_blank" rel="noopener" href="https://zxalive.com" class="special-link">新站点zxalive.com</a>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"zxblog.eu.org","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="Dubbo">
<meta property="og:type" content="article">
<meta property="og:title" content="Dubbo、Zookeeper">
<meta property="og:url" content="https://zxblog.eu.org/posts/3b3b/index.html">
<meta property="og:site_name" content="知行博客">
<meta property="og:description" content="Dubbo">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://zxblog.eu.org/assets/1577548250377-7130329.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1577548052037-7130329.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1577548175232-7130329.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1577548112773-7130329.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/image-20221106191822514.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/image-20221106192538740.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/image-20221106192851746.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/image-20221106193114251.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/image-20221105142243365.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/wps12-7629378.jpg">
<meta property="og:image" content="https://zxblog.eu.org/assets/wps13.jpg">
<meta property="og:image" content="https://zxblog.eu.org/assets/wps14.jpg">
<meta property="og:image" content="https://zxblog.eu.org/assets/wps15.jpg">
<meta property="og:image" content="https://zxblog.eu.org/assets/wps16.jpg">
<meta property="og:image" content="https://zxblog.eu.org/assets/wps17.jpg">
<meta property="og:image" content="https://zxblog.eu.org/assets/wps18.jpg">
<meta property="og:image" content="https://zxblog.eu.org/assets/wps19.jpg">
<meta property="og:image" content="https://zxblog.eu.org/assets/wps20.jpg">
<meta property="og:image" content="https://zxblog.eu.org/assets/1578298201398.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1578297063167.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1578297477356.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1578297603008.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1578297758655.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1578300464726.png">
<meta property="og:image" content="f:/Dubbo/dubbo/资料/images/1578300551892.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1578300677041.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1578300774258.png">
<meta property="og:image" content="f:/Dubbo/dubbo/ppt/%E8%AE%B2%E4%B9%89/assets/1573541604032.png">
<meta property="og:image" content="f:/Dubbo/dubbo/ppt/%E8%AE%B2%E4%B9%89/assets/1573211549000.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1578301528363.png">
<meta property="og:image" content="f:/Dubbo/dubbo/ppt/%E8%AE%B2%E4%B9%89/assets/1573213952863.png">
<meta property="og:image" content="https://zxblog.eu.org/assets/1578301892712.png">
<meta property="article:published_time" content="2021-11-17T13:32:51.000Z">
<meta property="article:modified_time" content="2024-08-18T10:14:29.235Z">
<meta property="article:author" content="zhangxin">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://zxblog.eu.org/assets/1577548250377-7130329.png">


<link rel="canonical" href="https://zxblog.eu.org/posts/3b3b/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://zxblog.eu.org/posts/3b3b/","path":"posts/3b3b/","title":"Dubbo、Zookeeper"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Dubbo、Zookeeper | 知行博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<style>.darkmode--activated{--body-bg-color:#282828;--content-bg-color:#333;--card-bg-color:#555;--text-color:#ccc;--blockquote-color:#bbb;--link-color:#ccc;--link-hover-color:#eee;--brand-color:#ddd;--brand-hover-color:#ddd;--table-row-odd-bg-color:#282828;--table-row-hover-bg-color:#363636;--menu-item-bg-color:#555;--btn-default-bg:#222;--btn-default-color:#ccc;--btn-default-border-color:#555;--btn-default-hover-bg:#666;--btn-default-hover-color:#ccc;--btn-default-hover-border-color:#666;--highlight-background:#282b2e;--highlight-foreground:#a9b7c6;--highlight-gutter-background:#34393d;--highlight-gutter-foreground:#9ca9b6}.darkmode--activated img{opacity:.75}.darkmode--activated img:hover{opacity:.9}.darkmode--activated code{color:#69dbdc;background:0 0}button.darkmode-toggle{z-index:9999}.darkmode-ignore,img{display:flex!important}.beian img{display:inline-block!important}</style></head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">知行博客</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">新站点：zxalive.com</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Zookeeper"><span class="nav-number">1.</span> <span class="nav-text">Zookeeper</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85"><span class="nav-number">1.1.</span> <span class="nav-text">下载安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8"><span class="nav-number">1.2.</span> <span class="nav-text">配置启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8A%82%E7%82%B9"><span class="nav-number">1.3.</span> <span class="nav-text">节点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%91%BD%E4%BB%A4%E6%93%8D%E4%BD%9C"><span class="nav-number">1.4.</span> <span class="nav-text">命令操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="nav-number">1.4.1.</span> <span class="nav-text">服务端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">1.4.2.</span> <span class="nav-text">客户端</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Curator"><span class="nav-number">1.5.</span> <span class="nav-text">Curator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Curator-API-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">1.6.</span> <span class="nav-text">Curator API 常用操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5%EF%BC%88%E5%85%B7%E4%BD%93%E8%A7%81%E4%BB%A3%E7%A0%81%EF%BC%89"><span class="nav-number">1.6.1.</span> <span class="nav-text">建立连接（具体见代码）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E8%8A%82%E7%82%B9"><span class="nav-number">1.6.2.</span> <span class="nav-text">添加节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9"><span class="nav-number">1.6.3.</span> <span class="nav-text">删除节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%8A%82%E7%82%B9"><span class="nav-number">1.6.4.</span> <span class="nav-text">修改节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E8%8A%82%E7%82%B9"><span class="nav-number">1.6.5.</span> <span class="nav-text">查询节点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Watch%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC"><span class="nav-number">1.6.6.</span> <span class="nav-text">Watch事件监听</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AE%9E%E7%8E%B0"><span class="nav-number">1.6.7.</span> <span class="nav-text">分布式锁实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ZooKeeper%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%8E%9F%E7%90%86"><span class="nav-number">1.6.8.</span> <span class="nav-text">ZooKeeper分布式锁原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Curator%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81API"><span class="nav-number">1.6.9.</span> <span class="nav-text">Curator实现分布式锁API</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Zookeeper%E9%9B%86%E7%BE%A4"><span class="nav-number">1.7.</span> <span class="nav-text">Zookeeper集群</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.7.1.</span> <span class="nav-text">介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9B%86%E7%BE%A4%E8%A7%92%E8%89%B2"><span class="nav-number">1.7.2.</span> <span class="nav-text">集群角色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%90%AD%E5%BB%BAZookeeper%E9%9B%86%E7%BE%A4"><span class="nav-number">1.7.3.</span> <span class="nav-text">搭建Zookeeper集群</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-%E6%90%AD%E5%BB%BA%E8%A6%81%E6%B1%82"><span class="nav-number">1.7.3.1.</span> <span class="nav-text">1.1 搭建要求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">1.7.3.2.</span> <span class="nav-text">1.2 准备工作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-%E9%85%8D%E7%BD%AE%E9%9B%86%E7%BE%A4"><span class="nav-number">1.7.3.3.</span> <span class="nav-text">1.3 配置集群</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4-%E5%90%AF%E5%8A%A8%E9%9B%86%E7%BE%A4"><span class="nav-number">1.7.3.4.</span> <span class="nav-text">1.4 启动集群</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-%E6%A8%A1%E6%8B%9F%E9%9B%86%E7%BE%A4%E5%BC%82%E5%B8%B8"><span class="nav-number">1.7.3.5.</span> <span class="nav-text">1.5 模拟集群异常</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#dubbo-admin"><span class="nav-number">2.</span> <span class="nav-text">dubbo-admin</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">2.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="nav-number">2.2.</span> <span class="nav-text">简单使用</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">zhangxin</p>
  <div class="site-description" itemprop="description">新站点：zxalive.com</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">267</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">35</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


  <a target="_blank" rel="noopener" href="https://zxalive.com" class="special-link">新站点zxalive.com</a>


    </div>

    <div class="main-inner post posts-expand">

  <a target="_blank" rel="noopener" href="https://zxalive.com" class="special-link">新站点zxalive.com</a>

  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zxblog.eu.org/posts/3b3b/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhangxin">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="知行博客">
      <meta itemprop="description" content="新站点：zxalive.com">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Dubbo、Zookeeper | 知行博客">
      <meta itemprop="description" content="Dubbo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Dubbo、Zookeeper
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-11-17 21:32:51" itemprop="dateCreated datePublished" datetime="2021-11-17T21:32:51+08:00">2021-11-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2024-08-18 18:14:29" itemprop="dateModified" datetime="2024-08-18T18:14:29+08:00">2024-08-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Java%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">Java开发</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>9 分钟</span>
    </span>
</div>

            <div class="post-description">Dubbo</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h1><p>Zookeeper笔记：<a target="_blank" rel="noopener" href="https://blog.csdn.net/hancoder/article/details/107054128">https://blog.csdn.net/hancoder/article/details/107054128</a></p>
<h2 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h2><p><a target="_blank" rel="noopener" href="https://wwl.lanzoub.com/iuDpY0f9ccqf">apache-zookeeper-3.5.6-bin.tar.gz</a></p>
<p><a target="_blank" rel="noopener" href="https://wwl.lanzoub.com/ioNjX0f9cmnc">Curator初始环境.zip</a></p>
<p><strong>1、环境准备</strong></p>
<p>ZooKeeper服务器是用Java创建的，它运行在JVM之上。需要安装JDK 7或更高版本。</p>
<p><strong>2、上传</strong></p>
<p>将下载的ZooKeeper放到&#x2F;opt&#x2F;ZooKeeper目录下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">上传zookeeper alt+p</span></span><br><span class="line">put f:/setup/apache-zookeeper-3.5.6-bin.tar.gz</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">打开 opt目录</span></span><br><span class="line">cd /opt</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建zooKeeper目录</span></span><br><span class="line">mkdir  zooKeeper</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将zookeeper安装包移动到 /opt/zooKeeper</span></span><br><span class="line">mv apache-zookeeper-3.5.6-bin.tar.gz /opt/zookeeper/</span><br></pre></td></tr></table></figure>

<p><strong>3、解压</strong></p>
<p>将tar包解压到&#x2F;opt&#x2F;zookeeper目录下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tar -zxvf apache-ZooKeeper-3.5.6-bin.tar.gz </span><br></pre></td></tr></table></figure>

<h2 id="配置启动"><a href="#配置启动" class="headerlink" title="配置启动"></a>配置启动</h2><p><strong>1、配置zoo.cfg</strong></p>
<p>进入到conf目录拷贝一个zoo_sample.cfg并完成配置</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入到conf目录</span></span><br><span class="line">cd /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/conf/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">拷贝</span></span><br><span class="line">cp  zoo_sample.cfg  zoo.cfg</span><br></pre></td></tr></table></figure>



<p>修改zoo.cfg</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">打开目录</span></span><br><span class="line">cd /opt/zooKeeper/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">创建zooKeeper存储目录</span></span><br><span class="line">mkdir  zkdata</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改zoo.cfg</span></span><br><span class="line">vim /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/conf/zoo.cfg</span><br></pre></td></tr></table></figure>

<p><img src="/../../assets/1577548250377-7130329.png" alt="1577548250377"></p>
<p>修改存储目录：dataDir&#x3D;&#x2F;opt&#x2F;zookeeper&#x2F;zkdata</p>
<p><strong>2、启动ZooKeeper</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /opt/zooKeeper/apache-zooKeeper-3.5.6-bin/bin/</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动</span></span><br><span class="line"> ./zkServer.sh  start</span><br></pre></td></tr></table></figure>

<p><img src="/../../assets/1577548052037-7130329.png" alt="1577548052037"></p>
<p>看到上图表示ZooKeeper成功启动</p>
<p><strong>3、查看ZooKeeper状态</strong></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">./zkServer.sh status</span><br></pre></td></tr></table></figure>

<p>zookeeper启动成功。standalone代表zk没有搭建集群，现在是单节点</p>
<p><img src="/../../assets/1577548175232-7130329.png" alt="1577548175232"></p>
<p>zookeeper没有启动</p>
<p><img src="/../../assets/1577548112773-7130329.png" alt="1577548112773"></p>
<h2 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h2><ul>
<li><p>ZooKeeper 是一个树形目录服务,其数据模型和Unix的文件系统目录树很类似，拥有一个层次化结构。</p>
</li>
<li><p>这里面的每一个节点都被称为： ZNode，每个节点上都会保存自己的数据和节点信息。 </p>
</li>
<li><p>节点可以拥有子节点，同时也允许少量（1MB）数据存储在该节点之下。</p>
</li>
<li><p>节点可以分为四大类：</p>
</li>
<li><ul>
<li>PERSISTENT 持久化节点 </li>
<li>EPHEMERAL 临时节点 ：-e</li>
<li>PERSISTENT_SEQUENTIAL 持久化顺序节点 ：-s</li>
<li>EPHEMERAL_SEQUENTIAL 临时顺序节点 ：-es</li>
</ul>
</li>
</ul>
<h2 id="命令操作"><a href="#命令操作" class="headerlink" title="命令操作"></a>命令操作</h2><h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><ul>
<li>启动 ZooKeeper 服务: .&#x2F;zkServer.sh start</li>
<li>查看 ZooKeeper 服务状态: .&#x2F;zkServer.sh status</li>
<li>停止 ZooKeeper 服务: .&#x2F;zkServer.sh stop </li>
<li>重启 ZooKeeper 服务: .&#x2F;zkServer.sh restart</li>
</ul>
<h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><ul>
<li>连接ZooKeeper服务端 <strong>.&#x2F;zkCli.sh –server ip:port</strong></li>
<li>断开连接<strong>quit</strong></li>
<li>查看命令帮助<strong>help</strong></li>
<li>显示指定目录下节点<strong>ls</strong> <strong>目录</strong></li>
<li>创建节点<strong>create &#x2F;节点path value</strong></li>
<li>获取节点值<strong>get &#x2F;节点path</strong></li>
<li>设置节点值<strong>set &#x2F;节点path value</strong></li>
<li>删除单个节点<strong>delete &#x2F;节点path</strong></li>
<li>删除带有子节点的节点<strong>deleteall &#x2F;节点path</strong></li>
<li>创建临时节点<strong>create -e &#x2F;节点path value</strong></li>
<li>创建顺序节点<strong>create -s &#x2F;节点path value</strong></li>
<li>查询节点详细信息<strong>ls –s &#x2F;节点path</strong><ul>
<li>czxid：节点被创建的事务ID </li>
<li>ctime: 创建时间 </li>
<li>mzxid: 最后一次被更新的事务ID </li>
<li>mtime: 修改时间 </li>
<li>pzxid：子节点列表最后一次被更新的事务ID</li>
<li>cversion：子节点的版本号 </li>
<li>dataversion：数据版本号 </li>
<li>aclversion：权限版本号 </li>
<li>ephemeralOwner：用于临时节点，代表临时节点的事务ID，如果为持久节点则为0 </li>
<li>dataLength：节点存储的数据的长度 </li>
<li>numChildren：当前节点的子节点个数</li>
</ul>
</li>
</ul>
<h2 id="Curator"><a href="#Curator" class="headerlink" title="Curator"></a>Curator</h2><ul>
<li><p>常见的ZooKeeper Java API ：</p>
</li>
<li><ul>
<li>原生Java API</li>
<li>ZkClient</li>
<li>Curator</li>
</ul>
</li>
<li><p>官网：<a target="_blank" rel="noopener" href="http://curator.apache.org/">http://curator.apache.org/</a></p>
</li>
</ul>
<h2 id="Curator-API-常用操作"><a href="#Curator-API-常用操作" class="headerlink" title="Curator API 常用操作"></a><strong>Curator API 常用操作</strong></h2><h3 id="建立连接（具体见代码）"><a href="#建立连接（具体见代码）" class="headerlink" title="建立连接（具体见代码）"></a>建立连接（具体见代码）</h3><h3 id="添加节点"><a href="#添加节点" class="headerlink" title="添加节点"></a>添加节点</h3><h3 id="删除节点"><a href="#删除节点" class="headerlink" title="删除节点"></a>删除节点</h3><h3 id="修改节点"><a href="#修改节点" class="headerlink" title="修改节点"></a>修改节点</h3><h3 id="查询节点"><a href="#查询节点" class="headerlink" title="查询节点"></a>查询节点</h3><h3 id="Watch事件监听"><a href="#Watch事件监听" class="headerlink" title="Watch事件监听"></a>Watch事件监听</h3><ul>
<li><p>ZooKeeper 允许用户在指定节点上注册一些Watcher，并且在一些特定事件触发的时候，ZooKeeper 服务端会将事件通知到感兴趣的客户端上去，该机制是 ZooKeeper 实现分布式协调服务的重要特性。</p>
</li>
<li><p>ZooKeeper 中引入了Watcher机制来实现了发布&#x2F;订阅功能能，能够让多个订阅者同时监听某一个对象，当一个对象自身状态变化时，会通知所有订阅者。</p>
</li>
<li><p>ZooKeeper 原生支持通过注册Watcher来进行事件监听，但是其使用并不是特别方便</p>
<p>需要开发人员自己反复注册Watcher，比较繁琐。</p>
</li>
<li><p>Curator引入了 Cache 来实现对 ZooKeeper 服务端事件的监听。</p>
</li>
<li><p>ZooKeeper提供了三种Watcher：</p>
</li>
<li><ul>
<li>NodeCache : 只是监听某一个特定的节点</li>
<li>PathChildrenCache : 监控一个ZNode的子节点. </li>
<li>TreeCache : 可以监控整个树上的所有节点，类似于PathChildrenCache和NodeCache的组合</li>
</ul>
</li>
</ul>
<h3 id="分布式锁实现"><a href="#分布式锁实现" class="headerlink" title="分布式锁实现"></a>分布式锁实现</h3><p>在我们进行单机应用开发，涉及并发同步的时候，我们往往采用synchronized或者Lock的方式来解决多线程间的代码同步问题，这时多线程的运行都是在同一个JVM之下，没有任何问题。<br>但当我们的应用是分布式集群工作的情况下，属于多JVM下的工作环境，跨JVM之间已经无法通过多线程的锁解决同步问题。<br>那么就需要一种更加高级的锁机制，来处理种跨机器的进程之间的数据同步问题——这就是分布式锁。</p>
<p><img src="/../../assets/image-20221106191822514.png" alt="image-20221106191822514"></p>
<h3 id="ZooKeeper分布式锁原理"><a href="#ZooKeeper分布式锁原理" class="headerlink" title="ZooKeeper分布式锁原理"></a>ZooKeeper分布式锁原理</h3><ul>
<li>核心思想：当客户端要获取锁，则创建节点，使用完锁，则删除该节点。</li>
</ul>
<ol>
<li><p>客户端获取锁时，在lock节点下创建临时顺序节点。</p>
</li>
<li><p>然后获取lock下面的所有子节点，客户端获取到所有的子节点之后，如果发现自己创建的子节点序号最小，那么就认为该客户端获取到了锁。使用完锁后，将该节点删除。</p>
</li>
<li><p>如果发现自己创建的节点并非lock所有子节点中最小的，说明自己还没有获取到锁，此时客户端需要找到比自己小的那个节点，同时对其注册事件监听器，监听删除事件。</p>
</li>
<li><p>如果发现比自己小的那个节点被删除，则客户端的</p>
<p>  Watcher会收到相应通知，此时再次判断自己创建的节点</p>
<p>  是否是lock子节点中序号最小的，如果是则获取到了锁，</p>
<p>  如果不是则重复以上步骤继续获取到比自己小的一个节点</p>
<p>  并注册监听。</p>
</li>
</ol>
<img src="../../assets/image-20221106192538740.png" alt="image-20221106192538740" style="zoom:50%;" /> 

<h3 id="Curator实现分布式锁API"><a href="#Curator实现分布式锁API" class="headerlink" title="Curator实现分布式锁API"></a>Curator实现分布式锁API</h3><ul>
<li><p>在Curator中有五种锁方案：</p>
</li>
<li><ul>
<li>InterProcessSemaphoreMutex：分布式排它锁（非可重入锁）</li>
<li>InterProcessMutex：分布式可重入排它锁</li>
<li>InterProcessReadWriteLock：分布式读写锁</li>
<li>InterProcessMultiLock：将多个锁作为单个实体管理的容器</li>
<li>InterProcessSemaphoreV2：共享信号量</li>
</ul>
</li>
</ul>
<h2 id="Zookeeper集群"><a href="#Zookeeper集群" class="headerlink" title="Zookeeper集群"></a>Zookeeper集群</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><p>Leader选举：</p>
<ul>
<li><p>Serverid：服务器ID</p>
<p>   比如有三台服务器，编号分别是1,2,3。编号越大在选择算法中的权重越大。</p>
</li>
<li><p>Zxid：数据ID</p>
<p>   服务器中存放的最大数据ID.值越大说明数据 越新，在选举算法中数据越新权重越大。</p>
</li>
<li><p>在Leader选举的过程中，如果某台ZooKeeper</p>
<p>   获得了超过半数的选票，则此ZooKeeper就可以成为Leader了。</p>
</li>
</ul>
<img src="../../assets/image-20221106192851746.png" alt="image-20221106192851746" style="zoom:50%;" /> 

<h3 id="集群角色"><a href="#集群角色" class="headerlink" title="集群角色"></a>集群角色</h3><p>在ZooKeeper集群服中务中有三个角色：</p>
<p>Leader 领导者 ：      </p>
<ol>
<li><p>处理事务请求</p>
</li>
<li><p>集群内部各服务器的调度者</p>
</li>
</ol>
<p>Follower 跟随者 ：</p>
<ol>
<li><p>处理客户端非事务请求，转发事务请求给Leader服务器</p>
</li>
<li><p>参与Leader选举投票</p>
</li>
</ol>
<p>Observer 观察者：</p>
<ol>
<li>处理客户端非事务请求，转发事务请求给Leader服务器</li>
</ol>
<img src="../../assets/image-20221106193114251.png" alt="image-20221106193114251" style="zoom: 33%;" />

<h3 id="搭建Zookeeper集群"><a href="#搭建Zookeeper集群" class="headerlink" title="搭建Zookeeper集群"></a>搭建Zookeeper集群</h3><h4 id="1-1-搭建要求"><a href="#1-1-搭建要求" class="headerlink" title="1.1 搭建要求"></a><strong>1.1 搭建要求</strong></h4><p>真实的集群是需要部署在不同的服务器上的，但是在我们测试时同时启动很多个虚拟机内存会吃不消，所以我们通常会搭建<strong>伪集群</strong>，也就是把所有的服务都搭建在一台虚拟机上，用端口进行区分。</p>
<p>我们这里要求搭建一个三个节点的Zookeeper集群（伪集群）。</p>
<h4 id="1-2-准备工作"><a href="#1-2-准备工作" class="headerlink" title="1.2 准备工作"></a><strong>1.2 准备工作</strong></h4><p>重新部署一台虚拟机作为我们搭建集群的测试服务器。</p>
<p>（1）安装JDK  【此步骤省略】。</p>
<p>（2）Zookeeper压缩包上传到服务器<br>（3）将Zookeeper解压 ，建立&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster目录，将解压后的Zookeeper复制到以下三个目录</p>
<p>&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-1</p>
<p>&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-2</p>
<p>&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-3</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@localhost ~]# mkdir /usr/local/zookeeper-cluster</span><br><span class="line">[root@localhost ~]# cp -r  apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-1</span><br><span class="line">[root@localhost ~]# cp -r  apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-2</span><br><span class="line">[root@localhost ~]# cp -r  apache-zookeeper-3.5.6-bin /usr/local/zookeeper-cluster/zookeeper-3</span><br></pre></td></tr></table></figure>

<p>（4）创建data目录 ，并且将 conf下zoo_sample.cfg 文件改名为 zoo.cfg</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir /usr/local/zookeeper-cluster/zookeeper-1/data</span><br><span class="line">mkdir /usr/local/zookeeper-cluster/zookeeper-2/data</span><br><span class="line">mkdir /usr/local/zookeeper-cluster/zookeeper-3/data</span><br><span class="line"></span><br><span class="line">mv  /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo_sample.cfg  /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg</span><br><span class="line">mv  /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo_sample.cfg  /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg</span><br><span class="line">mv  /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo_sample.cfg  /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg</span><br></pre></td></tr></table></figure>






<p>（5） 配置每一个Zookeeper 的dataDir 和 clientPort 分别为2181  2182  2183</p>
<p>修改&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-1&#x2F;conf&#x2F;zoo.cfg</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg</span><br><span class="line"></span><br><span class="line">clientPort=2181</span><br><span class="line">dataDir=/usr/local/zookeeper-cluster/zookeeper-1/data</span><br></pre></td></tr></table></figure>

<p>修改&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-2&#x2F;conf&#x2F;zoo.cfg</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg</span><br><span class="line"></span><br><span class="line">clientPort=2182</span><br><span class="line">dataDir=/usr/local/zookeeper-cluster/zookeeper-2/data</span><br></pre></td></tr></table></figure>

<p>修改&#x2F;usr&#x2F;local&#x2F;zookeeper-cluster&#x2F;zookeeper-3&#x2F;conf&#x2F;zoo.cfg</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg</span><br><span class="line"></span><br><span class="line">clientPort=2183</span><br><span class="line">dataDir=/usr/local/zookeeper-cluster/zookeeper-3/data</span><br></pre></td></tr></table></figure>




<h4 id="1-3-配置集群"><a href="#1-3-配置集群" class="headerlink" title="1.3 配置集群"></a><strong>1.3 配置集群</strong></h4><p>（1）在每个zookeeper的 data 目录下创建一个 myid 文件，内容分别是1、2、3 。这个文件就是记录每个服务器的ID</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo 1 &gt;/usr/local/zookeeper-cluster/zookeeper-1/data/myid</span><br><span class="line">echo 2 &gt;/usr/local/zookeeper-cluster/zookeeper-2/data/myid</span><br><span class="line">echo 3 &gt;/usr/local/zookeeper-cluster/zookeeper-3/data/myid</span><br></pre></td></tr></table></figure>





<p>（2）在每一个zookeeper 的 zoo.cfg配置客户端访问端口（clientPort）和集群服务器IP列表。</p>
<p>集群服务器IP列表如下</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vim /usr/local/zookeeper-cluster/zookeeper-1/conf/zoo.cfg</span><br><span class="line">vim /usr/local/zookeeper-cluster/zookeeper-2/conf/zoo.cfg</span><br><span class="line">vim /usr/local/zookeeper-cluster/zookeeper-3/conf/zoo.cfg</span><br><span class="line"></span><br><span class="line">server.1=192.168.149.135:2881:3881</span><br><span class="line">server.2=192.168.149.135:2882:3882</span><br><span class="line">server.3=192.168.149.135:2883:3883</span><br></pre></td></tr></table></figure>

<p>解释：server.服务器ID&#x3D;服务器IP地址：服务器之间通信端口：服务器之间投票选举端口</p>
<h4 id="1-4-启动集群"><a href="#1-4-启动集群" class="headerlink" title="1.4 启动集群"></a><strong>1.4 启动集群</strong></h4><p>启动集群就是分别启动每个实例。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh start</span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh start</span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh start</span><br></pre></td></tr></table></figure>

<p><img src="/../../assets/image-20221105142243365.png" alt="image-20221105142243365"></p>
<p>启动后我们查询一下每个实例的运行状态</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status</span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status</span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status</span><br></pre></td></tr></table></figure>



<p>先查询第一个服务</p>
<p><img src="/../../assets/wps12-7629378.jpg" alt="img"> </p>
<p>Mode为follower表示是<strong>跟随者</strong>（从）</p>
<p>再查询第二个服务Mod 为leader表示是<strong>领导者</strong>（主）</p>
<p><img src="/../../assets/wps13.jpg" alt="img"> </p>
<p>查询第三个为跟随者（从）</p>
<p><img src="/../../assets/wps14.jpg" alt="wps14"> </p>
<h4 id="1-5-模拟集群异常"><a href="#1-5-模拟集群异常" class="headerlink" title="1.5 模拟集群异常"></a><strong>1.5 模拟集群异常</strong></h4><p>（1）首先我们先测试如果是从服务器挂掉，会怎么样</p>
<p>把3号服务器停掉，观察1号和2号，发现状态并没有变化</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh stop</span><br><span class="line"></span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status</span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status</span><br></pre></td></tr></table></figure>

<p><img src="/../../assets/wps15.jpg" alt="wps15"></p>
<p>由此得出结论，3个节点的集群，从服务器挂掉，集群正常</p>
<p>（2）我们再把1号服务器（从服务器）也停掉，查看2号（主服务器）的状态，发现已经停止运行了。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh stop</span><br><span class="line"></span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status</span><br></pre></td></tr></table></figure>

<p><img src="/../../assets/wps16.jpg" alt="wps16"></p>
<p>由此得出结论，3个节点的集群，2个从服务器都挂掉，主服务器也无法运行。因为可运行的机器没有超过集群总数量的半数。</p>
<p>（3）我们再次把1号服务器启动起来，发现2号服务器又开始正常工作了。而且依然是领导者。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh start</span><br><span class="line"></span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status</span><br></pre></td></tr></table></figure>



<p><img src="/../../assets/wps17.jpg" alt="wps17"></p>
<p>（4)我们把3号服务器也启动起来，把2号服务器停掉,停掉后观察1号和3号的状态。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh start</span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh stop</span><br><span class="line"></span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-1/bin/zkServer.sh status</span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status</span><br></pre></td></tr></table></figure>



<p><img src="/../../assets/wps18.jpg" alt="wps18"></p>
<p>发现新的leader产生了~  </p>
<p>由此我们得出结论，当集群中的主服务器挂了，集群中的其他服务器会自动进行选举状态，然后产生新得leader </p>
<p>（5）我们再次测试，当我们把2号服务器重新启动起来启动后，会发生什么？2号服务器会再次成为新的领导吗？我们看结果</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh start</span><br><span class="line"></span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-2/bin/zkServer.sh status</span><br><span class="line">/usr/local/zookeeper-cluster/zookeeper-3/bin/zkServer.sh status</span><br></pre></td></tr></table></figure>

<p><img src="/../../assets/wps19.jpg" alt="wps19"></p>
<p><img src="/../../assets/wps20.jpg" alt="wps20"></p>
<p>我们会发现，2号服务器启动后依然是跟随者（从服务器），3号服务器依然是领导者（主服务器），没有撼动3号服务器的领导地位。</p>
<p>由此我们得出结论，当领导者产生后，再次有新服务器加入集群，不会影响到现任领导者。</p>
<h1 id="dubbo-admin"><a href="#dubbo-admin" class="headerlink" title="dubbo-admin"></a>dubbo-admin</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p><strong>1、环境准备</strong></p>
<p>dubbo-admin 是一个前后端分离的项目。前端使用vue，后端使用springboot，安装 dubbo-admin 其实就是部署该项目。我们将dubbo-admin安装到开发环境上。要保证开发环境有jdk，maven，nodejs</p>
<p>安装node**(如果当前机器已经安装请忽略)**</p>
<p>因为前端工程是用vue开发的，所以需要安装node.js，node.js中自带了npm，后面我们会通过npm启动</p>
<p>下载地址</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">https:<span class="regexp">//</span>nodejs.org<span class="regexp">/en/</span></span><br></pre></td></tr></table></figure>

<p><img src="/../../assets/1578298201398.png" alt="1578298201398"></p>
<p><strong>2、下载 Dubbo-Admin</strong></p>
<p>进入github，搜索dubbo-admin</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">https:<span class="regexp">//gi</span>thub.com<span class="regexp">/apache/</span>dubbo-admin</span><br></pre></td></tr></table></figure>

<p>下载：</p>
<p><img src="/../../assets/1578297063167.png" alt="1578297063167"></p>
<p><strong>3、把下载的zip包解压到指定文件夹(解压到那个文件夹随意)</strong></p>
<p><img src="/../../assets/1578297477356.png" alt="1578297477356"></p>
<p><strong>4、修改配置文件</strong></p>
<p>解压后我们进入…\dubbo-admin-develop\dubbo-admin-server\src\main\resources目录，找到 <strong>application.properties</strong> 配置文件 进行配置修改</p>
<p><img src="/../../assets/1578297603008.png" alt="1578297603008"></p>
<p>修改zookeeper地址</p>
<p><img src="/../../assets/1578297758655.png" alt="1578297758655"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">centers <span class="keyword">in</span> dubbo2.7</span></span><br><span class="line">admin.registry.address=zookeeper://192.168.149.135:2181</span><br><span class="line">admin.config-center=zookeeper://192.168.149.135:2181</span><br><span class="line">admin.metadata-report.address=zookeeper://192.168.149.135:2181</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>admin.registry.address注册中心<br>admin.config-center 配置中心<br>admin.metadata-report.address元数据中心</p>
<p><strong>5、打包项目</strong></p>
<p>在 dubbo-admin-develop 目录执行打包命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mvn  clean package</span><br></pre></td></tr></table></figure>

<p><img src="/../../assets/1578300464726.png" alt="1578300464726"></p>
<p><strong>6、启动后端</strong></p>
<p>切换到目录</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dubbo-Admin-develop\dubbo-admin-distribution\target&gt;</span><br></pre></td></tr></table></figure>

<p>执行下面的命令启动 dubbo-admin，dubbo-admin后台由SpringBoot构建。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">java -jar .\dubbo-admin-0.1.jar</span><br></pre></td></tr></table></figure>

<p><img src="F:\Dubbo\dubbo\资料\images\1578300551892.png" alt="1578300551892"></p>
<p><strong>7、前台后端</strong></p>
<p>dubbo-admin-ui 目录下执行命令</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<p><img src="/../../assets/1578300677041.png" alt="1578300677041"></p>
<p><strong>8、访问</strong></p>
<p>浏览器输入。用户名密码都是root</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">http:<span class="regexp">//</span>localhost:<span class="number">8081</span>/</span><br></pre></td></tr></table></figure>

<p><img src="/../../assets/1578300774258.png" alt="1578300774258"></p>
<h2 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h2><p><img src="F:/Dubbo/dubbo/ppt/%E8%AE%B2%E4%B9%89/assets/1573541604032.png" alt="1573541604032"></p>
<p>注意:Dubbo Admin【服务Mock】【服务统计】将在后续版本发布….</p>
<p>在上面的步骤中，我们已经进入了Dubbo-Admin的主界面，在【快速入门】章节中，我们定义了服务生产者、和服务消费者，下面我们从Dubbo-Admin管理界面找到这个两个服务</p>
<p><strong>1、点击服务查询</strong></p>
<p><img src="F:/Dubbo/dubbo/ppt/%E8%AE%B2%E4%B9%89/assets/1573211549000.png" alt="1573211549000"></p>
<p><strong>2、查询结果</strong></p>
<p><img src="/../../assets/1578301528363.png" alt="1578301528363"></p>
<p>A:输入的查询条件com.itheima.service.UserService</p>
<p>B:搜索类型，主要分为【按服务名】【按IP地址】【按应用】三种类型查询</p>
<p>C:搜索结果</p>
<p><strong>3.1.4 dubo-admin查看详情</strong></p>
<p>我们查看com.itheima.service.UserService （服务提供者）的具体详细信息，包含【元数据信息】</p>
<p><strong>1）点击详情</strong></p>
<p><img src="F:/Dubbo/dubbo/ppt/%E8%AE%B2%E4%B9%89/assets/1573213952863.png" alt="1573213952863"></p>
<p>从【详情】界面查看，主要分为3个区域</p>
<p>A区域：主要包含服务端 基础信息比如服务名称、应用名称等</p>
<p>B区域：主要包含了生产者、消费者一些基本信息</p>
<p><strong>C区域：是元数据信息，注意看上面的图,元数据信息是空的</strong></p>
<p>我们需要打开我们的生产者配置文件加入下面配置</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 元数据配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dubbo:metadata-report</span> <span class="attr">address</span>=<span class="string">&quot;zookeeper://192.168.149.135:2181&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>重新启动生产者，再次打开Dubbo-Admin</p>
<p>这样我们的元数据信息就出来了</p>
<p><img src="/../../assets/1578301892712.png" alt="1578301892712"></p>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/posts/b764/" rel="prev" title="SpringCloud">
                  <i class="fa fa-angle-left"></i> SpringCloud
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/posts/3715/" rel="next" title="Spring全家桶">
                  Spring全家桶 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>





  <a target="_blank" rel="noopener" href="https://zxalive.com" class="special-link">新站点zxalive.com</a>


</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">zhangxin</span>
  </div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">1.8m</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">26:53</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
